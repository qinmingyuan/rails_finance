<table class="table is-hoverable is-fullwidth">
  <thead>
    <tr>
      <th><%= Expense.human_attribute_name(:subject) %></th>
      <th><%= Expense.human_attribute_name(:creator) %></th>
      <th><%= Expense.human_attribute_name(:amount) %></th>
      <th><%= Expense.human_attribute_name(:state) %></th>
      <th><%= Expense.human_attribute_name(:created_at) %></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
  <% @expenses.each do |expense| %>
    <tr>
      <td><%= expense.subject %></td>
      <td><%= expense.creator.name %></td>
      <td><%= expense.amount %></td>
      <td class="tags">
        <span class="tag"><%= expense.state_i18n %></span>
        <% if expense.can_operate?(current_member) %>
          <div class="buttons has-addons">
            <%= link_to 'Approve', new_check_path('Expense', expense.id, state: expense.next_state_state), remote: true, class: 'button is-primary' %>
            <%= link_to Expense.enum_i18n(:state, 'rejected'), new_check_path('Expense', expense.id, state: 'rejected'), remote: true, class: 'button is-danger' %>
            <% if ['pending_om', 'pending_cfo'].include?(expense.state) %>
              <%= link_to Expense.enum_i18n(:state, 'pending_md'), new_check_path('Expense', expense.id, state: 'pending_md'), remote: true, class: 'ui mini positive button' %>
            <% end %>
          </div>
        <% end %>
      </td>
      <td><time><%= expense.created_at.to_s(:rfc822) %></time></td>
      <td>
        <%= link_to admin_expense_path(expense), aria: { label: t('.show') }, remote: true, class: 'button is-small is-rounded is-light' do %>
          <i class="fas fa-eye"></i>
        <% end %>
        <%= link_to edit_admin_expense_path(expense), aria: { label: t('.edit') }, remote: true, class: 'button is-small is-rounded is-light' do %>
          <i class="fas fa-pencil-alt"></i>
        <% end %>
        <%= link_to admin_expense_path(expense), method: :delete, aria: { label: t('.destroy') }, data: { confirm: t('.confirm') }, remote: true, class: 'button is-small is-rounded is-light' do %>
          <i class="fas fa-trash"></i>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @expenses %>
